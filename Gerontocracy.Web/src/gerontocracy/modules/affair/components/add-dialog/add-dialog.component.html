<div class="ui-fluid">
    <div class="ui-g" [formGroup]="formGroup">
        <div class="ui-g-12 ui-md-12">
            <div class="ui-inputgroup">
                <span class="ui-inputgroup-addon"><i class="pi pi-copy"></i></span>
                <input type="text" pInputText formControlName="titel" placeholder="Titel">
            </div>
            <div class="d-flex flex-column">
                <p-message severity="error" text="Kein Titel eingegeben!"
                    *ngIf="formGroup.controls.titel.hasError('required') && formGroup.controls.titel.touched"
                    class="mt-5">
                </p-message>
                <p-message severity="error" text="Titel darf maximal 50 Zeichen lang sein!"
                    *ngIf="formGroup.controls.titel.hasError('maxlength') && formGroup.controls.titel.touched"
                    class="mt-5">
                </p-message>
            </div>
        </div>
        <div class="ui-g-12 ui-md-12">
            <div class="ui-inputgroup">
                <textarea pInputTextArea placeholder="Inhaltliche Beschreibung des Vorfalls" rows="10"
                    class="max-width" formControlName="beschreibung"></textarea>
            </div>
            <div class="d-flex flex-column">
                <p-message severity="error" text="Keine Beschreibung eingegeben!"
                    *ngIf="formGroup.controls.beschreibung.hasError('required') && formGroup.controls.beschreibung.touched"
                    class="mt-5">
                </p-message>
                <p-message severity="error" text="Beschreibung darf maximal 4000 Zeichen lang sein!"
                    *ngIf="formGroup.controls.beschreibung.hasError('maxlength') && formGroup.controls.beschreibung.touched"
                    class="mt-5">
                </p-message>
            </div>
        </div>
    </div>
    <div class="ui-g">
        <div class="ui-g-12 ui-md-8">
            <div class="ui-inputgroup">
                <span class="ui-inputgroup-addon"><i class="pi pi-user"></i></span>
                <p-autoComplete [suggestions]="options" (completeMethod)="getSuggestions($event)"
                    [(ngModel)]="politiker" field="fullname" [forceSelection]="true" [disabled]="!!politiker"
                    [readonly]="!!politiker" placeholder="Politiker auswÃ¤hlen">
                    <ng-template let-item pTemplate="item">
                        {{item | fullname}}
                    </ng-template>
                </p-autoComplete>
                <button pButton icon="pi pi-trash" *ngIf="politiker" (click)="unlockPolitiker()"></button>
            </div>
        </div>
        <div class="ui-g-12 ui-md-4 d-flex flex-row" *ngIf="politiker">
            <div class="mr-5">
                <p-radioButton name="reputation" label="Positiv" [(ngModel)]="reputationType"
                    [value]="ReputationType.Positive"></p-radioButton>
            </div>
            <div class="mr-5">
                <p-radioButton name="reputation" label="Neutral" [(ngModel)]="reputationType"
                    [value]="ReputationType.Neutral"></p-radioButton>
            </div>
            <div class="mr-5">
                <p-radioButton name="reputation" label="Negativ" [(ngModel)]="reputationType"
                    [value]="ReputationType.Negative"></p-radioButton>
            </div>
        </div>
        <div class="ui-g-12 ui-md-12">
            <p-table [value]="sources">
                <ng-template pTemplate="header">
                    <tr>
                        <th colspan="2" class="valign-middle">
                            <button pButton icon="pi pi-plus" class="action_button f-left" (click)="addSource($event)">
                            </button>
                            Quelle
                        </th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-row>
                    <tr>
                        <td><a [href]="row.url" target="_blank">{{row.zusatz}}</a></td>
                        <td>{{row.url | url | stringTrim: 20}}</td>
                        <td><button pButton icon="pi pi-trash" class="action_button"
                                (click)="onRemoveClicked(row.index)"></button></td>
                    </tr>
                </ng-template>
            </p-table>
            <div class="mt-5 d-flex d-flex-between">
                <div>
                    <p-message severity="error" text="Es muss mindestens eine Quelle angegeben werden!"
                        *ngIf="showSourcesError" class="mt-5">
                    </p-message>
                </div>
                <div class="d-flex flex-row">
                    <button pButton icon="pi pi-cloud-upload" class="mr-5" (click)="addAffair()" label="Einreichen">
                    </button>
                    <button pButton icon="pi pi-times" class="ui-button-secondary" (click)="close()" label="Abbrechen">
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>